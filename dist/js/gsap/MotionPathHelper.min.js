!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,function(t){"use strict";function x(t){return Math.round(1e5*t)/1e5||0}function i(t,e){return e.totalLength=t.totalLength,t.samples?(e.samples=t.samples.slice(0),e.lookup=t.lookup.slice(0),e.minLength=t.minLength,e.resolution=t.resolution):t.totalPoints&&(e.totalPoints=t.totalPoints),e}var y,O=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,q=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,Y=Math.PI/180,R=Math.sin,N=Math.cos,L=Math.abs,X=Math.sqrt,V=Math.atan2;function G(t){for(var e=[],n=0;n<t.length;n++)e[n]=i(t[n],t[n].slice(0));return i(t,e)}function j(t,e,n,i,s,o,r){for(var a,h,l,c,d,u=t.length;-1<--u;)for(h=(a=t[u]).length,l=0;l<h;l+=2)c=a[l],d=a[l+1],a[l]=c*e+d*i+o,a[l+1]=c*n+d*s+r;return t._dirty=1,t}function z(t){function e(t,e,n,i){c=(n-t)/3,d=(i-e)/3,a.push(t+c,e+d,n-c,i-d,n,i)}var n,i,s,o,r,a,h,l,c,d,u,p,g,f=(t+"").replace(q,function(t){t=+t;return t<1e-4&&-1e-4<t?0:t}).match(O)||[],_=[],m=0,v=0,b=f.length,y=0,A="ERROR: malformed path: "+t;if(!t||!isNaN(f[0])||isNaN(f[1]))return console.log(A),_;for(n=0;n<b;n++)if(p=o,isNaN(f[n])?r=(o=f[n].toUpperCase())!==f[n]:n--,g=+f[n+1],s=+f[n+2],r&&(g+=m,s+=v),n||(h=g,l=s),"M"===o)a&&(a.length<8?--_.length:y+=a.length),m=h=g,v=l=s,a=[g,s],_.push(a),n+=2,o="L";else if("C"===o)r||(m=v=0),(a=a||[0,0]).push(g,s,m+ +f[n+3],v+ +f[n+4],m+=+f[n+5],v+=+f[n+6]),n+=6;else if("S"===o)c=m,d=v,"C"!==p&&"S"!==p||(c+=m-a[a.length-4],d+=v-a[a.length-3]),r||(m=v=0),a.push(c,d,g,s,m+=+f[n+3],v+=+f[n+4]),n+=4;else if("Q"===o)c=m+2/3*(g-m),d=v+2/3*(s-v),r||(m=v=0),m+=+f[n+3],v+=+f[n+4],a.push(c,d,m+2/3*(g-m),v+2/3*(s-v),m,v),n+=4;else if("T"===o)c=m-a[a.length-4],d=v-a[a.length-3],a.push(m+c,v+d,g+2/3*(m+1.5*c-g),s+2/3*(v+1.5*d-s),m=g,v=s),n+=2;else if("H"===o)e(m,v,m=g,v),n+=1;else if("V"===o)e(m,v,m,v=g+(r?v-m:0)),n+=1;else if("L"===o||"Z"===o)"Z"===o&&(g=h,s=l,a.closed=!0),("L"===o||.5<L(m-g)||.5<L(v-s))&&(e(m,v,g,s),"L"===o&&(n+=2)),m=g,v=s;else if("A"===o){if(p=f[n+4],g=f[n+5],c=f[n+6],d=f[n+7],i=7,1<p.length&&(p.length<3?(d=c,c=g,i--):(d=g,c=p.substr(2),i-=2),g=p.charAt(1),p=p.charAt(0)),u=function(t,e,n,i,s,o,r,a,h){if(t!==a||e!==h){n=L(n),i=L(i);var l=s%360*Y,c=N(l),l=R(l),d=Math.PI,u=2*d,p=(t-a)/2,g=(e-h)/2,f=c*p+l*g,_=-l*p+c*g,p=f*f,g=_*_,m=p/(n*n)+g/(i*i),m=(1<m&&(n=X(m)*n,i=X(m)*i),n*n),v=i*i,m=(m*v-m*g-v*p)/(m*g+v*p),g=(o===r?-1:1)*X(m=m<0?0:m),v=n*_/i*g,p=-i*f/n*g,b=c*v-l*p+(t+a)/2,y=l*v+c*p+(e+h)/2,A=(f-v)/n,w=(_-p)/i,o=(-f-v)/n,m=(-_-p)/i,g=A*A+w*w,P=(w<0?-1:1)*Math.acos(A/X(g)),t=(A*m-w*o<0?-1:1)*Math.acos((A*o+w*m)/X(g*(o*o+m*m)));isNaN(t)&&(t=d),!r&&0<t?t-=u:r&&t<0&&(t+=u),P%=u,t%=u;for(var x=Math.ceil(L(t)/(u/4)),S=[],C=t/x,E=4/3*R(C/2)/(1+N(C/2)),k=c*n,M=l*n,D=l*-i,T=c*i,H=0;H<x;H++)f=N(s=P+H*C),_=R(s),A=N(s+=C),w=R(s),S.push(f-E*_,_+E*f,A+E*w,w-E*A,A,w);for(H=0;H<S.length;H+=2)f=S[H],_=S[H+1],S[H]=f*k+_*D+b,S[H+1]=f*M+_*T+y;return S[H-2]=a,S[H-1]=h,S}}(m,v,+f[n+1],+f[n+2],+f[n+3],+p,+g,(r?m:0)+ +c,(r?v:0)+ +d),n+=i,u)for(i=0;i<u.length;i++)a.push(u[i]);m=a[a.length-2],v=a[a.length-1]}else console.log(A);return(n=a.length)<6?(_.pop(),n=0):a[0]===a[n-2]&&a[1]===a[n-1]&&(a.closed=!0),_.totalPoints=y+n,_}function B(t,e,n,i,s,o,r,a,h,l,c){var d=(t+n)/2,u=(e+i)/2,p=(n+s)/2,g=(i+o)/2,f=(s+r)/2,_=(o+a)/2,m=(d+p)/2,v=(u+g)/2,p=(p+f)/2,g=(g+_)/2,b=(m+p)/2,y=(v+g)/2,A=r-t,w=a-e,n=L((n-r)*w-(i-a)*A),i=L((s-r)*w-(o-a)*A);l||(l=[t,e,r,a],c=2),l.splice(c||l.length-2,0,b,y),h*(A*A+w*w)<(n+i)*(n+i)&&(s=l.length,B(t,e,d,u,m,v,b,y,h,l,c),B(b,y,p,g,f,_,r,a,h,l,c+2+(l.length-s)))}function F(t,e,n){var i,s,o,r,a,h,l,c,d,u,p,g,f=(t=L(t[0]-t[2])<1e-4&&L(t[1]-t[3])<1e-4?t.slice(2):t).length-2,_=+t[0],m=+t[1],v=+t[2],b=+t[3],y=[_,m,_,m],A=v-_,w=b-m,P=Math.abs(t[f]-_)<.001&&Math.abs(t[f+1]-m)<.001;for(isNaN(n)&&(n=Math.PI/10),P&&(t.push(v,b),v=_,b=m,_=t[f-2],m=t[f-1],t.unshift(_,m),f+=4),e=e||0===e?+e:1,r=2;r<f;r+=2)i=_,s=m,_=v,m=b,v=+t[r+2],b=+t[r+3],_===v&&m===b||(u=(a=A)*a+(l=w)*l,p=(A=v-_)*A+(w=b-m)*w,g=(h=v-i)*h+(c=b-s)*c,d=(g=Math.acos((u+p-g)/X(4*u*p)))/Math.PI*e,u=X(u)*d,d*=X(p),_===i&&m===s||(n<g?(o=V(c,h),y.push(x(_-N(o)*u),x(m-R(o)*u),x(_),x(m),x(_+N(o)*d),x(m+R(o)*d))):(o=V(l,a),y.push(x(_-N(o)*u),x(m-R(o)*u)),o=V(w,A),y.push(x(_),x(m),x(_+N(o)*d),x(m+R(o)*d)))));return _!==v||m!==b||y.length<4?y.push(x(v),x(b),x(v),x(b)):y.length-=2,P&&(y.splice(0,6),y.length=y.length-6),y}function W(t,e){var n,i,s,o,r,a,h=parseFloat(t[0]),l=parseFloat(t[1]),c=[h,l],d=t.length-2;for(e=Math.pow(e||1,2),n=2;n<d;n+=2)e<(s=h-(i=parseFloat(t[n])))*s+(o=l-(s=parseFloat(t[n+1])))*o&&(c.push(i,s),h=i,l=s);return c.push(parseFloat(t[d]),parseFloat(t[1+d])),function t(e,n,i,s,o){for(var r,a,h,l,c,d,u,p,g=s,f=e[n],_=e[n+1],m=e[i],v=e[i+1],b=n+2;b<i;b+=2)a=e[b],h=e[b+1],p=v-(c=_),((u=m-(l=f))||p)&&(1<(d=((a-l)*u+(h-c)*p)/(u*u+p*p))?(l=m,c=v):0<d&&(l+=u*d,c+=p*d)),g<(u=Math.pow(a-l,2)+Math.pow(h-c,2))&&(r=b,g=u);s<g&&(2<r-n&&t(e,n,r,s,o),o.push(e[r],e[r+1]),2<i-r&&t(e,r,i,s,o))}(c,0,a=c.length-2,e,r=[c[0],c[1]]),r.push(c[a],c[1+a]),r}function U(t){var e,n=t.ownerDocument||t;!(f in t.style)&&"msTransform"in t.style&&(it=(f="msTransform")+"Origin");for(;n.parentNode&&(n=n.parentNode););return g=window,tt=new rt,n&&(K=(l=n).documentElement,c=n.body,(et=l.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none",t=n.createElement("div"),e=n.createElement("div"),c.appendChild(t),t.appendChild(e),t.style.position="static",t.style[f]="translate3d(0,0,1px)",nt=e.offsetParent!==t,c.removeChild(t)),n}function Z(t){return t.ownerSVGElement||("svg"===(t.tagName+"").toLowerCase()?t:null)}function p(t,e){var n,i,s,o,r,a;if(t.parentNode&&(l||U(t)))return a=(n=Z(t))?n.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i=n?e?"rect":"g":"div",s=2!==e?0:100,o=3===e?100:0,r="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",a=l.createElementNS?l.createElementNS(a.replace(/^https/,"http"),i):l.createElement(i),e&&(n?(J=J||p(t),a.setAttribute("width",.01),a.setAttribute("height",.01),a.setAttribute("transform","translate("+s+","+o+")"),J.appendChild(a)):(Q||((Q=p(t)).style.cssText=r),a.style.cssText=r+"width:0.1px;height:0.1px;top:"+o+"px;left:"+s+"px",Q.appendChild(a))),a;throw"Need document and parent."}function $(t,e,n,i,s,o,r){return t.a=e,t.b=n,t.c=i,t.d=s,t.e=o,t.f=r,t}var l,g,K,c,Q,J,tt,et,nt,f="transform",it=f+"Origin",st=[],ot=[],rt=((e=s.prototype).inverse=function(){var t=this.a,e=this.b,n=this.c,i=this.d,s=this.e,o=this.f,r=t*i-e*n||1e-10;return $(this,i/r,-e/r,-n/r,t/r,(n*o-i*s)/r,-(t*o-e*s)/r)},e.multiply=function(t){var e=this.a,n=this.b,i=this.c,s=this.d,o=this.e,r=this.f,a=t.a,h=t.c,l=t.b,c=t.d,d=t.e,t=t.f;return $(this,a*e+l*i,a*n+l*s,h*e+c*i,h*n+c*s,o+d*e+t*i,r+d*n+t*s)},e.clone=function(){return new s(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(t){var e=this.a,n=this.b,i=this.c,s=this.d,o=this.e,r=this.f;return e===t.a&&n===t.b&&i===t.c&&s===t.d&&o===t.e&&r===t.f},e.apply=function(t,e){var n=t.x,t=t.y,i=this.a,s=this.b,o=this.c,r=this.d,a=this.e,h=this.f;return(e=void 0===e?{}:e).x=n*i+t*o+a||0,e.y=n*s+t*r+h||0,e},s);function s(t,e,n,i,s,o){$(this,t=void 0===t?1:t,e=void 0===e?0:e,n=void 0===n?0:n,i=void 0===i?1:i,s=void 0===s?0:s,o=void 0===o?0:o)}function at(t,e,n,i){if(!t||!t.parentNode||(l||U(t)).documentElement===t)return new rt;var s=function(t){for(var e,n;t&&t!==c;)(n=t._gsap)&&n.uncache&&n.get(t,"x"),n&&!n.scaleX&&!n.scaleY&&n.renderTransform&&(n.scaleX=n.scaleY=1e-4,n.renderTransform(1,n),e?e.push(n):e=[n]),t=t.parentNode;return e}(t),o=Z(t)?st:ot,n=function(t,e){var n,i,s,o,r,a,h,l=Z(t),c=t===l,d=l?st:ot,u=t.parentNode;if(t===g)return t;if(d.length||d.push(p(t,1),p(t,2),p(t,3)),d=l?J:Q,l)c?((h=(r=t).getCTM())||(a=r.style[f],r.style[f]="none",r.appendChild(et),h=et.getCTM(),r.removeChild(et),a?r.style[f]=a:r.style.removeProperty(f.replace(/([A-Z])/g,"-$1").toLowerCase())),s=-(i=h||tt.clone()).e/i.a,o=-i.f/i.d,n=tt):(i=t.getBBox(),s=(n=(n=t.transform?t.transform.baseVal:{}).numberOfItems?1<n.numberOfItems?function(t){for(var e=new rt,n=0;n<t.numberOfItems;n++)e.multiply(t.getItem(n).matrix);return e}(n):n.getItem(0).matrix:tt).a*i.x+n.c*i.y,o=n.b*i.x+n.d*i.y),e&&"g"===t.tagName.toLowerCase()&&(s=o=0),(c?l:u).appendChild(d),d.setAttribute("transform","matrix("+n.a+","+n.b+","+n.c+","+n.d+","+(n.e+s)+","+(n.f+o)+")");else{if(s=o=0,nt)for(n=t.offsetParent,i=t;(i=i&&i.parentNode)&&i!==n&&i.parentNode;)4<(g.getComputedStyle(i)[f]+"").length&&(s=i.offsetLeft,o=i.offsetTop,i=0);if("absolute"!==(a=g.getComputedStyle(t)).position&&"fixed"!==a.position)for(n=t.offsetParent;u&&u!==n;)s+=u.scrollLeft||0,o+=u.scrollTop||0,u=u.parentNode;(i=d.style).top=t.offsetTop-o+"px",i.left=t.offsetLeft-s+"px",i[f]=a[f],i[it]=a[it],i.position="fixed"===a.position?"fixed":"absolute",t.parentNode.appendChild(d)}return d}(t,n),r=o[0].getBoundingClientRect(),a=o[1].getBoundingClientRect(),o=o[2].getBoundingClientRect(),h=n.parentNode,i=!i&&function t(e){return"fixed"===g.getComputedStyle(e).position||((e=e.parentNode)&&1===e.nodeType?t(e):void 0)}(t),t=new rt((a.left-r.left)/100,(a.top-r.top)/100,(o.left-r.left)/100,(o.top-r.top)/100,r.left+(!i&&(g.pageXOffset||l.scrollLeft||K.scrollLeft||c.scrollLeft)||0),r.top+(!i&&(g.pageYOffset||l.scrollTop||K.scrollTop||c.scrollTop)||0));if(h.removeChild(n),s)for(r=s.length;r--;)(a=s[r]).scaleX=a.scaleY=0,a.renderTransform(1,a);return e?t.inverse():t}function ht(){return!1}function _(t){t.preventDefault&&(t.preventDefault(),t.preventManipulation&&t.preventManipulation())}function lt(t){return A.createElementNS?A.createElementNS("http://www.w3.org/1999/xhtml",t):A.createElement(t)}function o(t,e,n){var i,s=A.createElementNS("http://www.w3.org/2000/svg",t),o=/([a-z])([A-Z])/g;for(i in(n=n||{}).class=n.class||"path-editor",n)void 0!==s.style[i]?s.style[i]=n[i]:s.setAttributeNS(null,i.replace(o,"$1-$2").toLowerCase(),n[i]);return e.appendChild(s),s}function ct(t){return(t.transform&&t.transform.baseVal.consolidate()||Lt).matrix}function m(t){return~~(1e3*t+(t<0?-.5:.5))/1e3}function dt(t){if(!t.target._gsSelection&&!Ht&&100<Dt()-Tt){for(var e=k.length;-1<--e;)k[e].deselect();k.length=0}}function v(t,e,n,i){var s;t.addEventListener?(s=St[e],t.addEventListener(s||e,n,i=i||{passive:!1}),s&&e!==s&&"pointer"!==s.substr(0,7)&&t.addEventListener(e,n,i)):t.attachEvent&&t.attachEvent("on"+e,n)}function a(t,e,n){var i;t.removeEventListener?(i=St[e],t.removeEventListener(i||e,n),i&&e!==i&&"pointer"!==i.substr(0,7)&&t.removeEventListener(e,n)):t.detachEvent&&t.detachEvent("on"+e,n)}function ut(t){Xt=t.touches&&_dragCount<t.touches.length,a(t.target,"touchend",ut)}function pt(t){Xt=t.touches&&_dragCount<t.touches.length,v(t.target,"touchend",ut)}function r(e,n){return function(t){return e.call(n,t)}}function b(t,e,n){t=e.vars[t];t&&t.call(e.vars.callbackScope||e,n||e)}function gt(){Ct.style.display="block",Ct.select(),Ct.style.display="none"}function ft(t){var e,n=this,i=at(n.target.parentNode,!0);this._matrix=this.target.transform.baseVal.getItem(0).matrix,this._ctm=i,St[t.type]?(v(e=-1!==t.type.indexOf("touch")?t.currentTarget||t.target:A,"touchend",n._onRelease),v(e,"touchmove",n._onMove),v(e,"touchcancel",n._onRelease),v(A,"touchstart",pt),v(w,"touchforcechange",_)):(e=null,v(A,"mousemove",n._onMove)),bt||v(A,"mouseup",n._onRelease),_(t),gt(),t.changedTouches?(t=n.touch=t.changedTouches[0],n.touchID=t.identifier):t.pointerId?n.touchID=t.pointerId:n.touch=n.touchID=null,n._startPointerY=n.pointerY=t.pageY,n._startPointerX=n.pointerX=t.pageX,n._startElementX=n._matrix.e,n._startElementY=n._matrix.f,1===this._ctm.a&&0===this._ctm.b&&0===this._ctm.c&&1===this._ctm.d?this._ctm=null:(i=n._startPointerX*this._ctm.a+n._startPointerY*this._ctm.c+this._ctm.e,n._startPointerY=n._startPointerX*this._ctm.b+n._startPointerY*this._ctm.d+this._ctm.f,n._startPointerX=i),n.isPressed=Ht=!0,n.touchEventTarget=e,n.vars.onPress&&n.vars.onPress.call(n.vars.callbackScope||n,n.pointerEvent)}function _t(t){var e,n,i=this,s=t;if(i._enabled&&!Xt&&i.isPressed&&t){if(e=(i.pointerEvent=t).changedTouches){if((t=e[0])!==i.touch&&t.identifier!==i.touchID){for(n=e.length;-1<--n&&(t=e[n]).identifier!==i.touchID;);if(n<0)return}}else if(t.pointerId&&i.touchID&&t.pointerId!==i.touchID)return;_(s),i.setPointerPosition(t.pageX,t.pageY),i.vars.onDrag&&i.vars.onDrag.call(i.vars.callbackScope||i,i.pointerEvent)}}function mt(t,e){var n=this;if(n._enabled&&n.isPressed&&(!t||null==n.touchID||e||!(t.pointerId&&t.pointerId!==n.touchID||t.changedTouches&&!function(t,e){for(var n=t.length;-1<--n;)if(t[n].identifier===e)return 1}(t.changedTouches,n.touchID)))){Tt=Dt(),n.isPressed=Ht=!1;var i,s,e=t,o=n.isDragging,r=n.touchEventTarget;if(r?(a(r,"touchend",n._onRelease),a(r,"touchmove",n._onMove),a(r,"touchcancel",n._onRelease),a(A,"touchstart",pt)):a(A,"mousemove",n._onMove),bt||(a(A,"mouseup",n._onRelease),t&&t.target&&a(t.target,"mouseup",n._onRelease)),o?n.isDragging=!1:n.vars.onClick&&n.vars.onClick.call(n.vars.callbackScope||n,e),t){if((i=t.changedTouches)&&(t=i[0])!==n.touch&&t.identifier!==n.touchID){for(s=i.length;-1<--s&&(t=i[s]).identifier!==n.touchID;);if(s<0)return}n.pointerEvent=e,n.pointerX=t.pageX,n.pointerY=t.pageY}return e&&!o&&n.vars.onDragRelease?n.vars.onDragRelease.call(n,n.pointerEvent):(e&&_(e),n.vars.onRelease&&n.vars.onRelease.call(n.vars.callbackScope||n,n.pointerEvent)),o&&n.vars.onDragEnd&&n.vars.onDragEnd.call(n.vars.callbackScope||n,n.pointerEvent),!0}}function vt(t,e,n,i){for(var s=t[e],o=s.length-(s.closed?6:0),r=[],a=0;a<o;a+=6)r.push(new qt(n,t,e,a,i));return s.closed&&(r[0].isClosedStart=!0),r}function d(t,e,n){var i=t[n]-t[e],n=t[n+1]-t[e+1];return Math.sqrt(i*i+n*n)}var A,bt,w,yt,At,P,u,wt,Pt,xt,St,Ct,Et,kt=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,h="#4e7fff",Mt=Math.PI/180,Dt=Date.now||function(){return(new Date).getTime()},Tt=0,Ht=0,Rt={},S=[],Nt={},C=[],E=",",k=[],Lt={matrix:new rt},Xt=0,It=((e=Ot.prototype).setPointerPosition=function(t,e){var n;this.pointerX=t,this.pointerY=e,this._ctm&&(n=t*this._ctm.a+e*this._ctm.c+this._ctm.e,e=t*this._ctm.b+e*this._ctm.d+this._ctm.f,t=n),(n=e-this._startPointerY)<1&&-1<n&&(n=0),(e=t-this._startPointerX)<1&&-1<e&&(e=0),t=(1e3*(this._startElementX+e)|0)/1e3,e=(1e3*(this._startElementY+n)|0)/1e3,this.snap&&!u&&(Nt.x=t,Nt.y=e,this.snap.call(this,Nt),t=Nt.x,e=Nt.y),this.x===t&&this.y===e||(this._matrix.f=this.y=e,this._matrix.e=this.x=t,!this.isDragging&&this.isPressed&&(this.isDragging=!0,b("onDragStart",this,this.pointerEvent)))},e.enabled=function(t){return arguments.length?((this._enabled=t)?(bt||v(this.target,"mousedown",this._onPress),v(this.target,"touchstart",this._onPress),v(this.target,"click",this._onClick,!0)):(t=this.isDragging,a(this.target,"mousedown",this._onPress),a(this.target,"touchstart",this._onPress),a(w,"touchforcechange",_),a(this.target,"click",this._onClick),this.touchEventTarget&&(a(this.touchEventTarget,"touchcancel",this._onRelease),a(this.touchEventTarget,"touchend",this._onRelease),a(this.touchEventTarget,"touchmove",this._onMove)),a(A,"mouseup",this._onRelease),a(A,"mousemove",this._onMove),this.isDragging=this.isPressed=!1,t&&b("onDragEnd",this,this.pointerEvent)),this):this._enabled},e.endDrag=function(t){this._onRelease(t)},Ot);function Ot(t,e){this.target="string"==typeof t?A.querySelectorAll(t)[0]:t,this.vars=e||{},this._onPress=r(ft,this),this._onMove=r(_t,this),this._onRelease=r(mt,this),this.target.setAttribute("transform",(this.target.getAttribute("transform")||"")+" translate(0,0)"),this._matrix=ct(this.target),this.x=this._matrix.e,this.y=this._matrix.f,this.snap=e.snap,isNaN(e.maxX)&&isNaN(e.minX)?this._bounds=0:(this._bounds=1,this.maxX=+e.maxX,this.minX=+e.minX),this.enabled(!0)}(e=Yt.prototype).onPress=function(){b("onPress",this)},e.onClick=function(){b("onClick",this)},e.onDrag=function(){var t=this.segment;this.vars.onDrag.call(this.vars.callbackScope||this,this,this._draggable.x-t[this.i],this._draggable.y-t[this.i+1])},e.onDragEnd=function(){b("onDragEnd",this)},e.onRelease=function(){b("onRelease",this)},e.update=function(t,e,n){t&&(this.rawPath=t),arguments.length<=1?(e=this.j,n=this.i):(this.j=e,this.i=n);var t=this.smooth,e=this.rawPath[e],i=0===n&&e.closed?e.length-4:n-2;this.segment=e,this.smooth=0<n&&n<e.length-2&&Math.abs(Math.atan2(e[n+1]-e[1+i],e[n]-e[i])-Math.atan2(e[n+3]-e[n+1],e[n+2]-e[n]))<.09?2:0,this.smooth!==t&&this.element.setAttribute("d",this.smooth?this.editor._circleHandle:this.editor._squareHandle),this.element.setAttribute("transform","translate("+e[n]+","+e[n+1]+")")};var qt=Yt;function Yt(t,e,n,i,s){this.editor=t,this.element=o("path",t._selection,{fill:h,stroke:h,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this.update(e,n,i),this.element._gsSelection=!0,this.vars=s||{},this._draggable=new It(this.element,{callbackScope:this,onDrag:this.onDrag,snap:this.vars.snap,onPress:this.onPress,onRelease:this.onRelease,onClick:this.onClick,onDragEnd:this.onDragEnd})}(e=Vt.prototype)._onRelease=function(t){var e=this._editingAnchor;e&&(Rt.x=e.segment[e.i],Rt.y=e.segment[e.i+1]),a(w,"touchforcechange",_),b("onRelease",this,t)},e.init=function(){var t,e,n=this.path.getAttribute("d"),i=z(n),s=this.path.getAttribute("transform")||"translate(0,0)",o=!this._rawPath||i.totalPoints!==this._rawPath.totalPoints||i.length!==this._rawPath.length,r={callbackScope:this,snap:this.vars.anchorSnap,onDrag:this._onDragAnchor,onPress:this._onPressAnchor,onRelease:this._onRelease,onClick:this._onClickAnchor,onDragEnd:this._onDragEndAnchor,maxX:this.vars.maxX,minX:this.vars.minX};if(o&&this._anchors&&this._anchors.length){for(e=0;e<this._anchors.length;e++)this._anchors[e].element.parentNode.removeChild(this._anchors[e].element),this._anchors[e]._draggable.enabled(!1);this._selectedAnchors.length=0}if(this._rawPath=i,o){if(this._anchors=vt(i,0,this,r),1<(t=i.length))for(e=1;e<t;e++)this._anchors=this._anchors.concat(vt(i,e,this,r))}else for(e=this._anchors.length;-1<--e;)this._anchors[e].update(i);return this._selection.appendChild(this._handle1),this._selection.appendChild(this._handle2),this._selectionPath.setAttribute("d",n),this._selectionHittest.setAttribute("d",n),this._g.setAttribute("transform",function(t){for(var e=ct(t),n=t.ownerSVGElement;(t=t.parentNode)&&t.ownerSVGElement===n;)e.multiply(ct(t));return"matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")"}(this.path.parentNode)||"translate(0,0)"),this._selection.setAttribute("transform",s),this._selectionHittest.setAttribute("transform",s),this._updateAnchors(),this},e._saveState=function(){for(var t=this,e=[],n=t._selectedAnchors,i=0;i<n.length;i++)e[i]=n[i].i;S.unshift({path:t,d:t.path.getAttribute("d"),transform:t.path.getAttribute("transform")||"",selectedIndexes:e}),30<S.length&&(S.length=30)},e._onClickSelectionPath=function(t){if("hidden"===this._selection.style.visibility)this.select();else if(P||t&&t.altKey){var e,n,i={callbackScope:this,snap:this.vars.anchorSnap,onDrag:this._onDragAnchor,onPress:this._onPressAnchor,onRelease:this._onRelease,onClick:this._onClickAnchor,onDragEnd:this._onDragEndAnchor,maxX:this.vars.maxX,minX:this.vars.minX},s=this._selection.getScreenCTM().inverse();for(this._draggable&&this._draggable._onRelease(t),s&&(o=t.clientX*s.a+t.clientY*s.c+s.e,r=t.clientX*s.b+t.clientY*s.d+s.f),s=function(t,e,n,i){for(var s,o,r,a={j:0,i:0,t:0},h=1e8,l=0;l<t.length;l++)for(r=t[l],s=0;s<r.length;s+=6)o=function t(e,n,i,s,o,r,a,h,l,c,d,u,p,g){var f,_,m=(o-s)/r,v=0,b=s;for(y=1e8;b<=o;)(_=(f=(_=1-b)*_*_*a+3*_*_*b*l+3*_*b*b*d+b*b*b*p-n)*f+(f=_*_*_*h+3*_*_*b*c+3*_*b*b*u+b*b*b*g-i)*f)<y&&(y=_,v=b),b+=m;return 1<e?t(e-1,n,i,Math.max(v-m,0),Math.min(v+m,1),r,a,h,l,c,d,u,p,g):v}(1,e,n,0,1,i||20,r[s],r[s+1],r[s+2],r[s+3],r[s+4],r[s+5],r[s+6],r[s+7]),y<h&&(h=y,a.j=l,a.i=s,a.t=o);return a}(this._rawPath,o,r),o=this._rawPath[s.j],r=s.i,(a=s.t)<=0||1<=a||(h=o[r],c=o[r+1],l=o[r+2],d=o[r+3],u=(h=h+(l-h)*a)+((l=l+((g=o[r+4])-l)*a)-h)*a,p=(c=c+(d-c)*a)+((d=d+((f=o[r+5])-d)*a)-c)*a,l+=((g=g+(o[r+6]-g)*a)-l)*a,d+=((f=f+(o[r+7]-f)*a)-d)*a,o.splice(r+2,4,x(h),x(c),x(u),x(p),x(u+(l-u)*a),x(p+(d-p)*a),x(l),x(d),x(g),x(f)),o.samples&&o.samples.splice(r/6*o.resolution|0,0,0,0,0,0,0,0)),e=s.i+6,n=0;n<this._anchors.length;n++)this._anchors[n].i>=e&&(this._anchors[n].i+=6);h=new qt(this,this._rawPath,s.j,e,i),this._selection.appendChild(this._handle1),this._selection.appendChild(this._handle2),h._draggable._onPress(t),Pt=h,this._anchors.push(h),this._selectedAnchors.length=0,this._selectedAnchors.push(h),this._updateAnchors(),this.update(),this._saveState()}var o,r,a,h,l,c,d,u,p,g,f;gt(),v(w,"touchforcechange",_),b("onPress",this)},e._onClickHandle1=function(){var t=this._editingAnchor,e=t.i,n=t.segment,i=t.isClosedStart?n.length-4:e-2;P&&Math.abs(n[e]-n[i])<5&&Math.abs(n[e+1]-n[1+i])<5&&this._onClickAnchor(t)},e._onClickHandle2=function(){var t=this._editingAnchor,e=t.i,n=t.segment;P&&Math.abs(n[e]-n[e+2])<5&&Math.abs(n[e+1]-n[e+3])<5&&this._onClickAnchor(t)},e._onDragEndAnchor=function(){Pt=null,this._saveState()},e.isSelected=function(){return 0<this._selectedAnchors.length},e.select=function(t){if(this._selection.style.visibility="visible",this._editingAnchor=null,(this.path._gsSelection=!0)===t)for(var e=this._anchors.length;-1<--e;)this._selectedAnchors[e]=this._anchors[e];return-1===k.indexOf(this)&&k.push(this),this._updateAnchors(),this},e.deselect=function(){return this._selection.style.visibility="hidden",this._selectedAnchors.length=0,this._editingAnchor=null,this.path._gsSelection=!1,k.splice(k.indexOf(this),1),this._updateAnchors(),this},e._onDragPath=function(){var t=this._selectionHittest.getAttribute("transform")||"translate(0,0)";this._selection.setAttribute("transform",t),this.path.setAttribute("transform",t)},e._onPressAnchor=function(t){-1===this._selectedAnchors.indexOf(t)?(u||(this._selectedAnchors.length=0),this._selectedAnchors.push(t)):u&&(this._selectedAnchors.splice(this._selectedAnchors.indexOf(t),1),t._draggable.endDrag()),Rt.x=t.segment[t.i],Rt.y=t.segment[t.i+1],this._updateAnchors(),b("onPress",this)},e._deleteSelectedAnchors=function(){for(var t,e,n,i=this._selectedAnchors,s=i.length;-1<--s;)for((t=i[s]).element.parentNode.removeChild(t.element),t._draggable.enabled(!1),(e=t.i)?e<t.segment.length-2?t.segment.splice(e-2,6):t.segment.splice(e-4,6):t.segment.splice(e,6),i.splice(s,1),this._anchors.splice(this._anchors.indexOf(t),1),n=0;n<this._anchors.length;n++)this._anchors[n].i>=e&&(this._anchors[n].i-=6);this._updateAnchors(),this.update(),this._saveState(),this.vars.onDeleteAnchor&&this.vars.onDeleteAnchor.call(this.vars.callbackScope||this)},e._onClickAnchor=function(t){var e,n,i,s,o,r=t.i,a=t.segment,h=t.isClosedStart?a.length-4:r-2,l=1e3,c=!r||r>=a.length-2;P&&Pt!==t&&this._editingAnchor?(t.smooth=!t.smooth,c&&!t.isClosedStart&&(t.smooth=!1),t.element.setAttribute("d",t.smooth?this._circleHandle:this._squareHandle),!t.smooth||c&&!t.isClosedStart?t.smooth||c&&!t.isClosedStart||((r||t.isClosedStart)&&(a[h]=a[r],a[1+h]=a[r+1]),r<a.length-2&&(a[r+2]=a[r],a[r+3]=a[r+1]),this._updateAnchors(),this.update(),this._saveState()):(c=((c=Math.atan2(a[r+1]-a[1+h],a[r]-a[h]))+(e=Math.atan2(a[r+3]-a[r+1],a[r+2]-a[r])))/2,n=d(a,h,r),i=d(a,r,r+2),n<.2&&(n=d(a,r,h-4)/4,c=e||Math.atan2(a[r+7]-a[h-3],a[r+6]-a[h-4])),i<.2&&(i=d(a,r,r+6)/4,e=c||Math.atan2(a[r+7]-a[h-3],a[r+6]-a[h-4])),s=Math.sin(c),o=Math.cos(c),Math.abs(e-c)<Math.PI/2&&(s=-s,o=-o),a[h]=((a[r]+o*n)*l|0)/l,a[1+h]=((a[r+1]+s*n)*l|0)/l,a[r+2]=((a[r]-o*i)*l|0)/l,a[r+3]=((a[r+1]-s*i)*l|0)/l,this._updateAnchors(),this.update(),this._saveState())):u||(this._selectedAnchors.length=0,this._selectedAnchors.push(t)),Pt=null,this._updateAnchors()},e._updateAnchors=function(){var t,e,n,i=1===this._selectedAnchors.length?this._selectedAnchors[0]:null,s=i?i.segment:null;for(this._editingAnchor=i,t=0;t<this._anchors.length;t++)this._anchors[t].element.style.fill=-1!==this._selectedAnchors.indexOf(this._anchors[t])?h:"white";i&&(this._handle1.setAttribute("d",i.smooth?this._circleHandle:this._squareHandle),this._handle2.setAttribute("d",i.smooth?this._circleHandle:this._squareHandle)),t=i?i.i:0,i&&(t||i.isClosedStart)?(e=i.isClosedStart?s[s.length-4]:s[t-2],n=i.isClosedStart?s[s.length-3]:s[t-1],this._handle1.style.visibility=this._line1.style.visibility=P||e!==s[t]||n!==s[t+1]?"visible":"hidden",this._handle1.setAttribute("transform","translate("+e+E+n+")"),this._line1.setAttribute("points",e+E+n+E+s[t]+E+s[t+1])):this._handle1.style.visibility=this._line1.style.visibility="hidden",i&&t<s.length-2?(e=s[t+2],n=s[t+3],this._handle2.style.visibility=this._line2.style.visibility=P||e!==s[t]||n!==s[t+1]?"visible":"hidden",this._handle2.setAttribute("transform","translate("+e+E+n+")"),this._line2.setAttribute("points",s[t]+E+s[t+1]+E+e+E+n)):this._handle2.style.visibility=this._line2.style.visibility="hidden"},e._onPressAlt=function(){var t=this._editingAnchor;t&&((t.i||t.isClosedStart)&&(this._handle1.style.visibility=this._line1.style.visibility="visible"),t.i<t.segment.length-2&&(this._handle2.style.visibility=this._line2.style.visibility="visible"))},e._onReleaseAlt=function(){var t,e,n=this._editingAnchor;n&&(t=n.segment,e=n.i,n=n.isClosedStart?t.length-4:e-2,t[e]===t[n]&&t[e+1]===t[1+n]&&(this._handle1.style.visibility=this._line1.style.visibility="hidden"),t[e]===t[e+2]&&t[e+1]===t[e+3]&&(this._handle2.style.visibility=this._line2.style.visibility="hidden"))},e._onPressHandle1=function(){this._editingAnchor.smooth&&(this._oppositeHandleLength=d(this._editingAnchor.segment,this._editingAnchor.i,this._editingAnchor.i+2)),b("onPress",this)},e._onPressHandle2=function(){this._editingAnchor.smooth&&(this._oppositeHandleLength=d(this._editingAnchor.segment,this._editingAnchor.isClosedStart?this._editingAnchor.segment.length-4:this._editingAnchor.i-2,this._editingAnchor.i)),b("onPress",this)},e._onReleaseHandle=function(t){this._onRelease(t),this._saveState()},e._onDragHandle1=function(){var t=this._editingAnchor,e=t.segment,n=t.i,i=t.isClosedStart?e.length-4:n-2,s=1e3,o=this._handle1._draggable.x,r=this._handle1._draggable.y;e[i]=o=(o*s|0)/s,e[1+i]=r=(r*s|0)/s,t.smooth&&(P?(t.smooth=!1,t.element.setAttribute("d",this._squareHandle),this._handle1.setAttribute("d",this._squareHandle),this._handle2.setAttribute("d",this._squareHandle)):(i=Math.atan2(e[n+1]-r,e[n]-o),o=this._oppositeHandleLength*Math.cos(i),r=this._oppositeHandleLength*Math.sin(i),e[n+2]=((e[n]+o)*s|0)/s,e[n+3]=((e[n+1]+r)*s|0)/s)),this.update()},e._onDragHandle2=function(){var t=this._editingAnchor,e=t.segment,n=t.i,i=t.isClosedStart?e.length-4:n-2,s=1e3,o=this._handle2._draggable.x,r=this._handle2._draggable.y;e[n+2]=o=(o*s|0)/s,e[n+3]=r=(r*s|0)/s,t.smooth&&(P?(t.smooth=!1,t.element.setAttribute("d",this._squareHandle),this._handle1.setAttribute("d",this._squareHandle),this._handle2.setAttribute("d",this._squareHandle)):(t=Math.atan2(e[n+1]-r,e[n]-o),o=this._oppositeHandleLength*Math.cos(t),r=this._oppositeHandleLength*Math.sin(t),e[i]=((e[n]+o)*s|0)/s,e[1+i]=((e[n+1]+r)*s|0)/s)),this.update()},e._onDragAnchor=function(t,e,n){for(var i,s,o,r,a=this._selectedAnchors,h=a.length,l=1e3,c=0;c<h;c++)i=(o=a[c]).i,s=o.segment,i?(s[i-2]=((s[i-2]+e)*l|0)/l,s[i-1]=((s[i-1]+n)*l|0)/l):o.isClosedStart&&(s[r=s.length-2]=m(s[r]+e),s[1+r]=m(s[1+r]+n),s[r-2]=m(s[r-2]+e),s[r-1]=m(s[r-1]+n)),s[i]=((s[i]+e)*l|0)/l,s[i+1]=((s[i+1]+n)*l|0)/l,i<s.length-2&&(s[i+2]=((s[i+2]+e)*l|0)/l,s[i+3]=((s[i+3]+n)*l|0)/l),o!==t&&o.element.setAttribute("transform","translate("+s[i]+E+s[i+1]+")");this.update()},e.enabled=function(t){if(!arguments.length)return this._enabled;for(var e=this._anchors.length;-1<--e;)this._anchors[e]._draggable.enabled(t);return this._enabled=t,this._handle1._draggable.enabled(t),this._handle2._draggable.enabled(t),this._draggable&&this._draggable.enabled(t),t?this._selection.parentNode||(this.path.ownerSVGElement.appendChild(this._selectionHittest),this.path.ownerSVGElement.appendChild(this._selection),this.init(),this._saveState()):(this.deselect(),this.path.ownerSVGElement.removeChild(this._selectionHittest),this.path.ownerSVGElement.removeChild(this._selection)),this._updateAnchors(),this.update()},e.update=function(t){var e,n,i,s,o="",r=this._editingAnchor;if(t&&this.init(),r&&(e=r.i,n=r.segment,(e||r.isClosedStart)&&(i=n[r=r.isClosedStart?n.length-4:e-2],s=n[1+r],this._handle1.setAttribute("transform","translate("+i+E+s+")"),this._line1.setAttribute("points",i+E+s+E+n[e]+E+n[e+1])),e<n.length-2&&(i=n[e+2],s=n[e+3],this._handle2.setAttribute("transform","translate("+i+E+s+")"),this._line2.setAttribute("points",n[e]+E+n[e+1]+E+i+E+s))),t)o=this.path.getAttribute("d");else{for(e=0;e<this._rawPath.length;e++)7<(n=this._rawPath[e]).length&&(o+="M"+n[0]+E+n[1]+"C"+n.slice(2).join(E));this.path.setAttribute("d",o),this._selectionPath.setAttribute("d",o),this._selectionHittest.setAttribute("d",o)}return this.vars.onUpdate&&this._enabled&&b("onUpdate",this,o),this},e.getRawPath=function(t,e,n){return t?(t=ct(this.path),j(G(this._rawPath),1,0,0,1,t.e+(e||0),t.f+(n||0))):this._rawPath},e.getString=function(t,e,n){if(t){for(var i,s,o,t=ct(this.path),r=j(G(this._rawPath),1,0,0,1,t.e+(e||0),t.f+(n||0)),a="",h=(r="number"==typeof r[0]?[r]:r).length,l=0;l<h;l++){for(a+="M"+x((o=r[l])[0])+","+x(o[1])+" C",i=o.length,s=2;s<i;s++)a+=x(o[s++])+","+x(o[s++])+" "+x(o[s++])+","+x(o[s++])+" "+x(o[s++])+","+x(o[s])+" ";o.closed&&(a+="z")}return a}return this.path.getAttribute("d")},e.getNormalizedSVG=function(t,e,n,i){var s,o,r,a,h,l,c=this._rawPath[0],d=-1*c[0],u=0===e?0:-(e||c[1]),p=c.length,g=1/(c[p-2]+d),f=(f=-t||c[p-1]+u)?1/f:-g;for(g*=1e3,f*=1e3,o=C.length=0;o<p;o+=2)C[o]=((c[o]+d)*g|0)/1e3,C[o+1]=((c[o+1]+u)*f|0)/1e3;if(i){for(s=[],p=C.length,o=2;o<p;o+=6)r=C[o-2],a=C[o-1],h=C[o+4],l=C[o+5],s.push(r,a,h,l),B(r,a,C[o],C[o+1],C[o+2],C[o+3],h,l,.001,s,s.length-2);for(r=s[0],p=s.length,o=2;o<p;o+=2){if((h=s[o])<r||1<h||h<0){i();break}r=h}}return n&&8===p&&0===C[0]&&0===C[1]&&1===C[p-2]&&1===C[p-1]?C.slice(2,6).join(","):(C[2]="C"+C[2],"M"+C.join(","))};var e,M=Vt;function Vt(t,e){e=e||{},Et||(A=document,w=window,yt=A.body,xt=lt("div"),(Ct=lt("textarea")).style.display="none",yt&&yt.appendChild(Ct),St=function(t){for(var e=t.split(","),n=(void 0!==xt.onpointerdown?"pointerdown,pointermove,pointerup,pointercancel":void 0!==xt.onmspointerdown?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":t).split(","),i={},s=4;-1<--s;)i[e[s]]=n[s],i[n[s]]=e[s];return i}("touchstart,touchmove,touchend,touchcancel"),SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(t){return t.getScreenCTM().inverse().multiply(this.getScreenCTM())},A.addEventListener("keydown",function(t){var e,n,i,s,o=t.keyCode||t.which,t=t.key||o;if("Shift"===t||16===o)u=!0;else if("Control"===t||17===o)At=!0;else if("Meta"===t||91===o)wt=!0;else if("Alt"===t||18===o)for(P=!0,e=k.length;-1<--e;)k[e]._onPressAlt();else if(("z"===t||90===o)&&(At||wt)&&1<S.length){if(S.shift(),n=S[0]){for((s=n.path).path.setAttribute("d",n.d),s.path.setAttribute("transform",n.transform),s.init(),i=s._anchors,e=0;e<i.length;e++)-1!==n.selectedIndexes.indexOf(i[e].i)&&s._selectedAnchors.push(i[e]);s._updateAnchors(),s.update(),s.vars.onUndo&&s.vars.onUndo.call(s)}}else if("Delete"===t||"Backspace"===t||8===o||46===o||63272===o||"d"===o&&(At||wt))for(e=k.length;-1<--e;)k[e]._deleteSelectedAnchors();else if(("a"===t||65===o)&&(wt||At))for(e=k.length;-1<--e;)k[e].select(!0)},!0),A.addEventListener("keyup",function(t){t=t.key||t.keyCode||t.which;if("Shift"===t||16===t)u=!1;else if("Control"===t||17===t)At=!1;else if("Meta"===t||91===t)wt=!1;else if("Alt"===t||18===t){P=!1;for(var e=k.length;-1<--e;)k[e]._onReleaseAlt()}},!0),bt=!!w.PointerEvent,v(A,"mouseup",dt),v(A,"touchend",dt),v(A,"touchcancel",ht),v(w,"touchmove",ht),yt&&yt.addEventListener("touchstart",ht),Et=1),this.vars=e,this.path="string"==typeof t?A.querySelectorAll(t)[0]:t,this._g=o("g",this.path.ownerSVGElement,{class:"path-editor-g path-editor"}),this._selectionHittest=o("path",this._g,{stroke:"transparent",strokeWidth:16,fill:"none",vectorEffect:"non-scaling-stroke"}),this._selection=e._selection||o("g",this._g,{class:"path-editor-selection path-editor"}),this._selectionPath=o("path",this._selection,{stroke:h,strokeWidth:2,fill:"none",vectorEffect:"non-scaling-stroke"}),this._selectedAnchors=[],this._line1=o("polyline",this._selection,{stroke:h,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this._line2=o("polyline",this._selection,{stroke:h,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this._line1.style.pointerEvents=this._line2.style.pointerEvents=this._selectionPath.style.pointerEvents="none",this._enabled=!0;var n,t=this.path.parentNode.getScreenCTM().inverse(),t=(t.a+t.d)/2*(e.handleSize||5);this._squareHandle=["M-"+(n=m(n=t)),-n,n,-n,n,n,-n,n+"z"].join(E),this._circleHandle=(t=m(.552284749831*(n=1.15*t)),"M"+(n=m(n))+",0C"+[n,t,t,n,0,n,-t,n,-n,t,-n,0,-n,-t,-t,-n,0,-n,t,-n,n,-t,n,0].join(E)+"z"),this._handle1=o("path",this._selection,{d:this._squareHandle,fill:h,stroke:"transparent",strokeWidth:6}),this._handle2=o("path",this._selection,{d:this._squareHandle,fill:h,stroke:"transparent",strokeWidth:6}),this._handle1._draggable=new It(this._handle1,{onDrag:this._onDragHandle1,callbackScope:this,onPress:this._onPressHandle1,onRelease:this._onReleaseHandle,onClick:this._onClickHandle1,snap:e.handleSnap}),this._handle2._draggable=new It(this._handle2,{onDrag:this._onDragHandle2,callbackScope:this,onPress:this._onPressHandle2,onRelease:this._onReleaseHandle,onClick:this._onClickHandle2,snap:e.handleSnap}),this._handle1.style.visibility=this._handle2.style.visibility="hidden";for(var i=[this._handle1,this._handle2,this._line1,this._line2,this._selection,this._selectionPath,this._selectionHittest],s=i.length;-1<--s;)i[s]._gsSelection=!0;!1!==e.draggable&&(this._draggable=new It(this._selectionHittest,{callbackScope:this,onPress:this.select,onRelease:this._onRelease,onDrag:this._onDragPath,onDragEnd:this._saveState,maxX:this.vars.maxX,minX:this.vars.minX})),this.init(),this._selection.style.visibility=!1===e.selected?"hidden":"visible",!1!==e.selected&&(this.path._gsSelection=!0,k.push(this)),this._saveState(),bt||(v(this._selectionHittest,"mousedown",r(this._onClickSelectionPath,this)),v(this._selectionHittest,"mouseup",r(this._onRelease,this))),v(this._selectionHittest,"touchstart",r(this._onClickSelectionPath,this)),v(this._selectionHittest,"touchend",r(this._onRelease,this))}function Gt(t){return"string"==typeof t}function jt(t,e){e=T.createElementNS?T.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):T.createElement(t);return e.style?e:T.createElement(t)}function zt(t,e,n){return Gt(t)&&Kt.test(t)?T.querySelector(t):Array.isArray(t)?$t(Zt([{x:D.getProperty(e,"x"),y:D.getProperty(e,"y")}].concat(t),n)):Gt(t)||t&&"path"===(t.tagName+"").toLowerCase()?t:0}function Bt(t,e){var n="Please gsap.registerPlugin(MotionPathPlugin)";Ft=window,D=D||t||Ft.gsap||console.warn(n),T=document,H=T.body,Wt=T.documentElement,(Ut=D&&D.plugins.motionPath)?((I=jt("textarea")).style.display="none",H.appendChild(I),Zt=Ut.arrayToRawPath,$t=Ut.rawPathToString):!0===e&&console.warn(n)}M.simplifyPoints=W,M.pointsToSegment=F,M.simplifySVG=function(t,e){var n,i,s,o,r,a,h,l,c,d=(e=e||{}).tolerance||1,u=e.precision||1/d,p=(void 0===e.cornerThreshold?18:+e.cornerThreshold)*Mt;if("#"!==(t="string"!=typeof t?(n=t).getAttribute("d"):t).charAt(0)&&"."!==t.charAt(0)||(n=A.querySelector(t))&&(t=n.getAttribute("d")),i=!1!==e.curved||/[achqstvz]/gi.test(t)?z(t)[0]:t.match(kt),!1!==e.curved){for(l=i,i=[],c=l.length,s=2;s<c;s+=6)o=+l[s-2],a=+l[s-1],r=+l[s+4],h=+l[s+5],i.push(m(o),m(a),m(r),m(h)),B(o,a,+l[s],+l[s+1],+l[s+2],+l[s+3],r,h,1/(2e5*u),i,i.length-2);(i=F(W(i,d),e.curviness,p))[2]="C"+i[2]}else i=W(i,d);return t="M"+i.join(","),n&&n.setAttribute("d",t),t},M.create=function(t,e){return new M(t,e)},M.editingAxis=Rt,M.getSnapFunction=function(t){var r=t.radius||2,a=t.x||0===t.x?t.x:t.width?0:-1e20,h=t.y||0===t.y?t.y:t.height?0:-1e20,l=a+(t.width||1e40),c=h+(t.height||1e40),d=!1!==t.containX,u=!1!==t.containY,p=t.axis,g=t.gridSize;return r*=r,function(t){var e,n,i,s=t.x,o=t.y;d&&s<a||(n=s-a)*n<r?s=a:(d&&l<s||(n=l-s)*n<r)&&(s=l),u&&o<h||(i=o-h)*i<r?o=h:(u&&c<o||(i=c-o)*i<r)&&(o=c),p&&(n=s-p.x,i=o-p.y,n*n<r&&(s=p.x),i*i<r&&(o=p.y)),g&&(n=(e=a+Math.round((s-a)/g)*g)-s)*n+(i=(n=h+Math.round((o-h)/g)*g)-o)*i<r&&(s=e,o=n),t.x=s,t.y=o}},M.version="3.9.1";var D,Ft,T,Wt,H,Ut,Zt,$t,I,Kt=/(^[#\.][a-z]|[a-y][a-z])/i,Qt={matrix:{a:1,b:0,c:0,d:1,e:0,f:0}},n=(Jt.prototype.getString=function(){return this.editor.getString(!0,-this.offset.x,-this.offset.y)},Jt);function Jt(t,e){void 0===e&&(e={}),Ut||Bt(e.gsap,1);var n,i,s,o,r,a,h,l,c,d,u,p,g,f=jt("div"),_=this,m={x:0,y:0};t instanceof D.core.Tween?n=(s=t).targets()[0]:(n=D.utils.toArray(t)[0],s=function(t){for(var e=D.getTweensOf(t),n=0;n<e.length;n++){if(e[n].vars.motionPath)return e[n];e[n].timeline&&e.push.apply(e,e[n].timeline.getChildren())}}(n)),t=zt(e.path,n,e),this.offset=m,u=(u=n).getBoundingClientRect(),p=Wt.clientTop-(Ft.pageYOffset||Wt.scrollTop||H.scrollTop||0),g=Wt.clientLeft-(Ft.pageXOffset||Wt.scrollLeft||H.scrollLeft||0),g={left:u.left+g,top:u.top+p,right:u.right+g,bottom:u.bottom+p},u=parseFloat(D.getProperty(n,"x","px")),p=parseFloat(D.getProperty(n,"y","px")),a=n.getCTM&&"svg"!==n.tagName.toLowerCase(),s&&!t&&(t=zt(s.vars.motionPath.path||s.vars.motionPath,n,s.vars.motionPath)),f.setAttribute("class","copy-motion-path"),f.style.cssText="border-radius:8px; background-color:rgba(85, 85, 85, 0.7); color:#fff; cursor:pointer; padding:6px 12px; font-family:Signika Negative, Arial, sans-serif; position:fixed; left:50%; transform:translate(-50%, 0); font-size:19px; bottom:10px",f.innerText="COPY MOTION PATH",f._gsHelper=_,(D.utils.toArray(e.container)[0]||H).appendChild(f),c=function(){return _.getString()},d=function(){return D.fromTo(f,{backgroundColor:"white"},{duration:.5,backgroundColor:"rgba(85, 85, 85, 0.6)"})},(l=f).addEventListener("click",function(t){if(t.target._gsHelper){var e=c(t.target);if((I.value=e)&&I.select){console.log(e),I.style.display="block",I.select();try{T.execCommand("copy"),I.blur(),d&&d(l)}catch(t){console.warn("Copy didn't work; this browser doesn't permit that.")}I.style.display="none"}}}),(i=t&&t.ownerSVGElement)||(o=a&&n.ownerSVGElement&&n.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg",a?(i=n.ownerSVGElement,r=n.getBBox(),u=(a=(n.transform.baseVal.consolidate()||Qt).matrix).e,p=a.f,m.x=r.x,m.y=r.y):(i=jt("svg",o),H.appendChild(i),i.setAttribute("viewBox","0 0 100 100"),i.setAttribute("class","motion-path-helper"),i.style.cssText="overflow:visible; background-color: transparent; position:absolute; z-index:5000; width:100px; height:100px; top:"+(g.top-p)+"px; left:"+(g.left-u)+"px;"),r=Gt(t)&&!Kt.test(t)?t:function(t,e){for(var n=[0,31,8,58,24,75,40,90,69,100,100,100],i=0;i<n.length;i+=2)n[i]+=t,n[i+1]+=e;return"M"+t+","+e+"C"+n.join(",")}(u,p),(t=jt("path",o)).setAttribute("d",r),t.setAttribute("vector-effect","non-scaling-stroke"),t.style.cssText="fill:transparent; stroke-width:"+(e.pathWidth||3)+"; stroke:"+(e.pathColor||"#555")+"; opacity:"+(e.pathOpacity||.6),i.appendChild(t),(m.x||m.y)&&D.set(t,{x:m.x,y:m.y})),"selected"in e||(e.selected=!0),"anchorSnap"in e||(e.anchorSnap=function(t){t.x*t.x+t.y*t.y<16&&(t.x=t.y=0)}),h=s&&"nested"===s.parent.data?s.parent.parent:s,e.onPress=function(){h.pause(0)},e.onRelease=e.onDeleteAnchor=function(){s.invalidate(),h.restart()},this.editor=M.create(t,e),e.center&&D.set(n,{transformOrigin:"50% 50%",xPercent:-50,yPercent:-50}),s?(s.vars.motionPath.path?s.vars.motionPath.path=t:s.vars.motionPath={path:t},h.parent!==D.globalTimeline&&D.globalTimeline.add(h,function(t){for(var e=t.totalTime();t;)e=t.startTime()+e/(t.timeScale()||1),t=t.parent;return e}(h)-h.delay()),h.repeat(-1).repeatDelay(1)):s=h=D.to(n,{motionPath:{path:t,start:e.start||0,end:"end"in e?e.end:1,autoRotate:"autoRotate"in e&&e.autoRotate,align:t,alignOrigin:e.alignOrigin},duration:e.duration||5,ease:e.ease||"power1.inOut",repeat:-1,repeatDelay:1,paused:!e.path}),this.animation=s}n.register=Bt,n.create=function(t,e){return new n(t,e)},n.editPath=function(t,e){return M.create(t,e)},n.version="3.9.1",t.MotionPathHelper=n,t.default=n,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default});